## üßö Multichain Verifiable Registry (MVR) ‚Äì PoC

This repository demonstrates a proof-of-concept for extending [Sui's MVR (Move Verifiable Registry)](https://github.com/MystenLabs/mvr) to support **Ethereum smart contracts**.

### ‚úÖ Goal

Cross-chain trust layers help verify the integrity of smart contracts across blockchains, making sure provenance is clear and reducing risks.

* Prove the **origin**, **build**, and **deployment** of a Solidity smart contract.
* Register the result as a verifiable `.intoto.jsonl` provenance file.
* Use **Sui MVR** as a cross-chain trust layer.

---

### ‚öôÔ∏è Workflow

The [SLSA GitHub Generator](https://github.com/slsa-framework/slsa-github-generator) is used in this workflow to generate an `intoto.jsonl` file that formally attests to how the contract was built and deployed, following the SLSA (Supply-chain Levels for Software Artifacts) provenance standard.

This project uses **GitHub Actions** to:

1. **Compile** a Solidity contract (`Lock.sol`)
2. **Deploy** to Ethereum testnet (e.g., Holesky)
3. **Sign** the bytecode using a Sui key
4. **Generate** a provenance proof (`mvr.proof.json`)
5. **Encode** file hashes in base64
6. **Produce** an `intoto.jsonl` via [SLSA GitHub Generator](https://github.com/slsa-framework/slsa-github-generator)
7. **Register** the smart contract in MVR via app\_info

---

### üìÅ Key Files

* `contracts/Lock.sol` ‚Äì Example Solidity contract
* `scripts/deploy.js` ‚Äì Deploys the contract and generates `mvr.proof.json`
* `.github/workflows/build-deploy.yml` ‚Äì GitHub Actions automation
* `mvr.proof.json` ‚Äì Contains signatures and deployment metadata
* `mvr.intoto.jsonl` ‚Äì Final verifiable provenance document
* `scripts/mvr.js` ‚Äì Registers the deployed contract and provenance to MVR

---

### üîê Requirements

In addition to secrets, GitHub Actions must be granted appropriate permissions (e.g., `id-token: write`, `contents: read`, and `actions: read`) to execute workflows involving provenance and reusable workflows like the SLSA generator.

* GitHub Secrets:

  * `PRIVATE_KEY_ETH` ‚Äì Ethereum wallet private key
  * `PRIVATE_KEY_SUI` ‚Äì Base64-encoded Sui secret key

---

### üì¶ Outputs

* Verifiable build+deploy provenance
* Compatible with Sui MVR or tools like [notary.wal.app](https://notary.wal.app)

---

### ü¶™ Example Use Case

```json
{
  "mvr": {
    "publicKey": "0x...",
    "signature": "..."
  },
  "network": {
    "chain": "eth::0x13882",
    "txHash": "0x1234...",
    "signature": "...",
    "contractAddress": "..."
  }
}
```

---

## üöÄ PoC Purpose and Structure

### 1. Workflow

1.1. Build and deploy an Ethereum smart contract.
1.2. Sign the generated bytecode using both Sui and Ethereum keys to create a deployment proof.
1.3. Generate a provenance artifact (`mvr.proof.json`) containing the bytecode, signatures, and transaction hashes.
1.4. Generate an `mvr.intoto.jsonl` file with this information and register it in the MVR.
1.5. Ethereum lacks upgrade capability, so the provenance can only be registered under `app_info` rather than `package_info`.

---

### 2. Extended Ideas

#### 2.1. Multi-chain Expansion

* A new `PackageInfo Object` could help easily integrate multiple blockchains into the MVR ecosystem by capturing their provenance information.

#### 2.2. Interaction with Multi-chain Smart Contracts

* Deploying a Sui smart contract to interact with other blockchains and registering it as `PackageInfo` helps ensure clear provenance verification.
* This would enable Sui to serve as a secure interaction hub between different blockchains.

#### 2.3. Integration with Real-world IoT Devices

* Registering IoT devices with MVR would allow trusted provenance tracking and hardware verification whenever they interact with smart contracts.

---

This PoC shows how Sui MVR can serve as a practical and trustworthy hub for verifying provenance across blockchain and real-world scenarios.
